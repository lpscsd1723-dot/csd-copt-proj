# 語音助手使用說明

## 📖 概述

語音助手使用 JSON 配置文件來管理語音指令的匹配規則，支援精確匹配和模糊匹配兩種模式。

## 🎯 匹配邏輯

### 1. 精確匹配 (exact)
- **觸發條件**：語音內容包含任一精確關鍵字
- **優先級**：最高
- **信心度**：100%
- **範例**：說「中心成立背景」會精確匹配到對應頁面

### 2. 模糊匹配 (fuzzy)
- **觸發條件**：匹配的關鍵字數量 ≥ `minMatch`
- **優先級**：低於精確匹配
- **信心度**：匹配數量 / 總關鍵字數 × 100%
- **範例**：說「中心背景」會模糊匹配（匹配「中心」和「背景」兩個關鍵字）

## 📝 配置範例

```json
{
  "id": "center-history",
  "name": {
    "zh": "中心成立背景",
    "en": "Center Background",
    "ja": "センター設立背景"
  },
  "href": "#center-history",
  "keywords": {
    "zh": {
      "exact": ["中心成立背景", "成立背景"],
      "fuzzy": ["中心", "背景", "介紹", "歷史", "故事"],
      "minMatch": 2
    },
    "en": {
      "exact": ["center background", "center history"],
      "fuzzy": ["center", "background", "history", "about"],
      "minMatch": 2
    },
    "ja": {
      "exact": ["センター設立背景", "設立背景"],
      "fuzzy": ["センター", "背景", "紹介", "歴史"],
      "minMatch": 2
    }
  }
}
```

### 配置說明

- **name**: 頁面名稱（支援多語言）
- **keywords**: 按語言區分的關鍵字配置
  - **zh**: 中文關鍵字
  - **en**: 英文關鍵字
  - **ja**: 日文關鍵字
- **exact**: 精確匹配的關鍵字列表
- **fuzzy**: 模糊匹配的關鍵字列表
- **minMatch**: 模糊匹配所需的最少關鍵字數量

## 🎤 使用範例

### 範例 1：中文精確匹配
**語言**：中文  
**說出**：「我想看中心成立背景」  
**匹配**：精確匹配 ✅  
**結果**：跳轉到中心成立背景頁面  
**顯示**：中心成立背景 (精確匹配)

### 範例 2：中文模糊匹配
**語言**：中文  
**說出**：「中心介紹和背景」  
**匹配**：模糊匹配 ✅（匹配「中心」、「介紹」、「背景」三個關鍵字）  
**結果**：跳轉到中心成立背景頁面  
**顯示**：中心成立背景 (模糊匹配 60%)

### 範例 3：英文匹配
**語言**：English  
**說出**：「center background」  
**匹配**：精確匹配 ✅  
**結果**：跳轉到中心成立背景頁面  
**顯示**：Center Background (精確匹配)

### 範例 4：日文匹配
**語言**：日本語  
**說出**：「センター背景」  
**匹配**：模糊匹配 ✅（匹配「センター」、「背景」兩個關鍵字）  
**結果**：跳轉到中心成立背景頁面  
**顯示**：センター設立背景 (模糊匹配 50%)

### 範例 5：匹配數不足
**語言**：中文  
**說出**：「介紹」  
**匹配**：模糊匹配 ❌（只匹配1個，需要至少2個）  
**結果**：顯示幫助彈窗

### 範例 6：語言切換
**說出**：「切換到英文」或「English」  
**匹配**：精確匹配 ✅  
**結果**：切換介面語言到英文

## 🔧 調整匹配規則

### 調整最小匹配數

如果覺得某個頁面太容易/太難匹配，可以調整 `minMatch`：

```json
{
  "minMatch": 1  // 寬鬆：只要1個關鍵字
  "minMatch": 2  // 適中：需要2個關鍵字（推薦）
  "minMatch": 3  // 嚴格：需要3個關鍵字
}
```

### 新增關鍵字

在特定語言的 `exact` 或 `fuzzy` 陣列中新增更多關鍵字：

```json
{
  "keywords": {
    "zh": {
      "exact": ["中心成立背景", "成立背景", "中心背景"],
      "fuzzy": ["中心", "背景", "介紹", "歷史", "故事", "起源"],
      "minMatch": 2
    },
    "en": {
      "exact": ["center background", "center history", "establishment"],
      "fuzzy": ["center", "background", "history", "about", "origin"],
      "minMatch": 2
    }
  }
}
```

### 新增頁面

在 `voice_commands.json` 的 `pages` 陣列中新增：

```json
{
  "id": "new-page",
  "name": {
    "zh": "新頁面名稱",
    "en": "New Page Name",
    "ja": "新しいページ"
  },
  "href": "#new-page",
  "keywords": {
    "zh": {
      "exact": ["完整頁面名稱"],
      "fuzzy": ["關鍵字1", "關鍵字2", "關鍵字3"],
      "minMatch": 2
    },
    "en": {
      "exact": ["full page name"],
      "fuzzy": ["keyword1", "keyword2", "keyword3"],
      "minMatch": 2
    },
    "ja": {
      "exact": ["完全なページ名"],
      "fuzzy": ["キーワード1", "キーワード2", "キーワード3"],
      "minMatch": 2
    }
  }
}
```

## 🎯 最佳實踐

1. **精確關鍵字**：包含頁面的完整名稱和常見別名
2. **模糊關鍵字**：包含頁面名稱中的重要詞彙
3. **minMatch 設定**：
   - 1個：適合關鍵字很特殊的頁面（如「聯絡」）
   - 2個：適合大部分頁面（推薦）
   - 3個：適合需要更精確匹配的頁面
4. **多語言支援**：
   - 為每個頁面提供中文、英文、日文的關鍵字
   - 根據當前語言自動使用對應的關鍵字進行匹配
   - 語言切換後，語音指令會自動切換到新語言
5. **避免關鍵字重疊**：不同頁面的關鍵字組合應該有所區別

## 🐛 故障排除

### 問題：說了正確的內容但沒有匹配
**解決**：
1. 檢查關鍵字是否包含在 `exact` 或 `fuzzy` 中
2. 檢查 `minMatch` 是否設定得太高
3. 查看 Console 確認辨識的文字是否正確

### 問題：經常匹配到錯誤的頁面
**解決**：
1. 增加 `minMatch` 數量
2. 使用更具體的關鍵字
3. 減少不同頁面之間的關鍵字重疊

### 問題：語音辨識不準確
**解決**：
1. 確保在安靜的環境中
2. 說話清晰、速度適中
3. 使用完整的句子而非單字

